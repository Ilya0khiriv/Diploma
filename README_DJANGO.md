## Обзор
Этот проект представляет собой веб-приложение на Django, которое предоставляет пользователю аутентификацию, взаимодействие с ИИ-системой и сохранение истории общения. Пользователи могут зарегистрироваться, войти в систему и задавать вопросы ИИ. Ответы ИИ и вопросы пользователей сохраняются в базе данных и могут быть просмотрены на главной странице. Также пользователи могут настроить количество сообщений, отображаемых из истории общения. Ответы ИИ получаются от внешнего сервиса, работающего по адресу `http://0.0.0.0:8998`.

### Основные функции
- **Аутентификация пользователя**:
  - Регистрация и вход пользователей с использованием встроенной формы `UserCreationForm` в Django.
  - Управление сессией с помощью функций `authenticate`, `login` и `logout`.

- **Взаимодействие с ИИ**:
  - Пользователи могут задавать вопросы ИИ и получать ответы.
  - Разговоры (сообщения пользователей и ответы ИИ) сохраняются в базе данных.
  - Настройка количества сообщений, отображаемых из истории общения.

- **Интерфейс**:
  - Формы для регистрации, входа, подачи вопросов и настройки истории сообщений.
  - Шаблоны для рендеринга страниц (`login.html`, `register.html`, `base.html`).

---

## Структура файлов

```
ai_site/
├── __init__.py
├── asgi.py
├── settings.py
├── urls.py
└── wsgi.py

myapp/
├── __init__.py
├── apps.py
├── admin.py
├── forms.py
├── models.py
├── static/
│   └── css/
│       ├── base.css
│       └── login.css
├── tests.py
├── urls.py
└── views.py

templates/
└── myapp/
    ├── base.html
    ├── login.html
    └── register.html

db.sqlite3
manage.py
requirements.txt
```

### Описание файлов

- **`ai_site/`** — содержит основные настройки проекта:
  - `__init__.py`: Инициализация пакета.
  - `asgi.py`, `wsgi.py`: Точки входа для асинхронной и синхронной работы.
  - `settings.py`: Конфигурация проекта.
  - `urls.py`: Сопоставление маршрутов для всего проекта.

- **`myapp/`** — приложение, которое реализует логику:
  - `__init__.py`: Инициализация пакета.
  - `apps.py`: Конфигурация приложения.
  - `admin.py`: Регистрация моделей для панели администратора.
  - `forms.py`: Формы для регистрации, входа и вопросов.
  - `models.py`: Модели данных, включая `Conversation` и `AmountOfMessagesShown`.
  - `views.py`: Логика обработки запросов, включая аутентификацию и взаимодействие с ИИ.
  - `migrations/`: Папка с миграциями для изменения структуры базы данных.
  - `static/`: Статические файлы, включая CSS.
  - `urls.py`: Маршруты для приложения.
  - `tests.py`: Тесты приложения.

- **`templates/`** — шаблоны HTML:
  - `base.html`: Базовый шаблон для всех страниц.
  - `login.html`, `register.html`: Страницы для регистрации и входа.

- **`db.sqlite3`** — база данных проекта.
- **`manage.py`** — утилита для управления проектом Django.
- **`requirements.txt`** — файл с зависимостями.

---

### Маршруты

- **`/auth/register`**: Регистрация нового пользователя
- **`/auth/login`**: Вход в систему
- **`/`**: Главная защищенная страница для взаимодействия с ИИ
- **`/auth/logout`**: Выход из системы

---

### Вспомогательные функции
- `home`: Отображает главную страницу, обрабатывает отправку форм и управляет историей общения.
- `custom_login`: Аутентифицирует пользователя и запускает сессию.
- `custom_logout`: Завершает сессию пользователя и перенаправляет на страницу входа.
- `custom_register`: Регистрирует нового пользователя.
- `get_response`: Получает ответы ИИ от внешнего сервиса через HTTP-запрос.

---

## Использование

1. Запустите сервер разработки Django:
   ```bash
   python manage.py runserver
   ```
   - Приложение будет доступно по адресу `http://127.0.0.1:8000`.

2. Откройте браузер:
   - Перейдите на `http://127.0.0.1:8000/auth/register`, чтобы создать учетную запись.
   - Войдите в систему на `http://127.0.0.1:8000/auth/login`.

3. Используйте главную страницу (`/`), чтобы:
   - Задавать вопросы ИИ.
   - Настроить количество сообщений, отображаемых в истории общения.

4. Чтобы выйти из системы, перейдите на маршрут `/auth/logout`.
