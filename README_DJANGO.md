## Обзор
Этот проект представляет собой веб-приложение на Django, которое предоставляет пользователю аутентификацию, взаимодействие с ИИ-системой и сохранение истории общения. Пользователи могут зарегистрироваться, войти в систему и задавать вопросы ИИ. Ответы ИИ и вопросы пользователей сохраняются в базе данных и могут быть просмотрены на главной странице. Также пользователи могут настроить количество сообщений, отображаемых из истории общения. Ответы ИИ получаются от внешнего сервиса, работающего по адресу `http://0.0.0.0:8998`.

### Основные функции
- **Аутентификация пользователя**:
  - Регистрация и вход пользователей с использованием встроенной формы `UserCreationForm` в Django.
  - Управление сессией с помощью функций `authenticate`, `login` и `logout`.

- **Взаимодействие с ИИ**:
  - Пользователи могут задавать вопросы ИИ и получать ответы.
  - Разговоры (сообщения пользователей и ответы ИИ) сохраняются в базе данных.
  - Настройка количества сообщений, отображаемых из истории общения.

- **Интерфейс**:
  - Формы для регистрации, входа, подачи вопросов и настройки истории сообщений.
  - Шаблоны для рендеринга страниц (`login.html`, `register.html`, `base.html`).

---

## Описание файлов

### `views.py`
Основной файл контроллер, который:
- Управляет аутентификацией пользователей (вход, выход, регистрация).
- Обрабатывает отправку форм для вопросов пользователей и настройки сообщений.
- Получает ответы ИИ от внешнего сервиса.
- Сохраняет и извлекает разговоры из базы данных.

**Основные компоненты**:
- **Формы**:
  - `ContactForm`: Используется для отправки вопросов ИИ.
  - `AmountForm`: Позволяет пользователю настроить количество сообщений для отображения из истории общения.
  
- **Модели**:
  - `Conversation`: Хранит сообщения пользователей и ответы ИИ, связанные с пользователем.
  - `AmountOfMessagesShown`: Хранит количество сообщений, которые пользователь хочет отображать из своей истории общения.

- **Функции**:
  - `home`: Главная страница, где пользователи могут взаимодействовать с ИИ и просматривать историю общения.
  - `custom_login`: Обрабатывает вход пользователя.
  - `custom_logout`: Обрабатывает выход пользователя.
  - `custom_register`: Обрабатывает регистрацию пользователя.
  - `get_response`: Отправляет запрос на внешний сервис ИИ и получает ответ.

---

### Маршруты

- **`/auth/register`**: Регистрация нового пользователя  
  ![Регистрация](https://post-images.org/download/194.113.153.253-desk/LUVwjhs01733996045.png)

- **`/auth/login`**: Вход в систему  
  ![Вход](https://post-images.org/download/194.113.153.253-desk/ZRvKLVzO1733996095.png)

- **`/`**: Главная защищенная страница для взаимодействия с ИИ  
  ![Главная страница]([https://post-images.org/download/194.113.153.253-desk/lCUKqrND1733416556.png](https://post-images.org/download/194.113.153.253-desk/VTPua7MH1733996139.png))  

- **`/auth/logout`**: Выход из системы

---

### Вспомогательные функции
- `home`: Отображает главную страницу, обрабатывает отправку форм и управляет историей общения.
- `custom_login`: Аутентифицирует пользователя и запускает сессию.
- `custom_logout`: Завершает сессию пользователя и перенаправляет на страницу входа.
- `custom_register`: Регистрирует нового пользователя.
- `get_response`: Получает ответы ИИ от внешнего сервиса через HTTP-запрос.

---

## Использование

1. Запустите сервер разработки Django:
   ```bash
   python manage.py runserver
   ```
   - Приложение будет доступно по адресу `http://127.0.0.1:8000`.

2. Откройте браузер:
   - Перейдите на `http://127.0.0.1:8000/auth/register`, чтобы создать учетную запись.
   - Войдите в систему на `http://127.0.0.1:8000/auth/login`.

3. Используйте главную страницу (`/`), чтобы:
   - Задавать вопросы ИИ.
   - Настроить количество сообщений, отображаемых в истории общения.

4. Чтобы выйти из системы, перейдите на маршрут `/auth/logout`.
